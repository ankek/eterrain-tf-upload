# Testing Infrastructure Makefile Targets
# Feature: 002-automated-testing
# Auto-generated by /speckit.implement

.PHONY: test test-unit test-integration test-edge test-performance test-all coverage

# Run all tests
test-all: test-unit test-integration test-edge test-performance

# Unit tests only
test-unit:
	@echo "Running unit tests..."
	go test ./tests/unit-tests/... -v -cover

# Integration tests (requires test database)
test-integration:
	@echo "Running integration tests..."
	@echo "Ensure TEST_DB_* environment variables are configured"
	go test ./tests/integration-tests/... -v -cover

# Edge case tests
test-edge:
	@echo "Running edge case tests..."
	go test ./tests/edge-case-tests/... -v

# Performance tests
test-performance:
	@echo "Running performance tests..."
	go test ./tests/performance-tests/... -v -bench=. -benchmem

# Coverage report for critical paths
coverage:
	@echo "Generating coverage report..."
	go test ./tests/unit-tests/... ./tests/integration-tests/... \
		-coverprofile=coverage.out -covermode=atomic
	go tool cover -html=coverage.out -o coverage.html
	@echo "Coverage report generated: coverage.html"
	@go tool cover -func=coverage.out | grep total
